(this["webpackJsonpreact-auth-client-done-v2"]=this["webpackJsonpreact-auth-client-done-v2"]||[]).push([[0],{124:function(e,t,n){e.exports=n(290)},289:function(e,t,n){},290:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(116),c=n.n(r),l=n(1),i=n(2),s=n(6),u=n(5),m=n(7),h=n(22),d=n(18),p=n(3),g=n(9),v=n.n(g),f=new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://catch-me-there.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"signup",value:function(e){var t=e.username,n=e.password,a=e.photo;return console.log("user from auth-service",e),this.auth.post("/auth/signup",{username:t,password:n,photo:a}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.username,n=e.password;return this.auth.post("/auth/login",{username:t,password:n}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),b=o.a.createContext(),E=b.Consumer,y=b.Provider,k=function(e){return function(t){function n(){return Object(l.a)(this,n),Object(s.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,t),Object(i.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement(E,null,(function(n){var a=n.login,r=n.signup,c=n.user,l=n.logout,i=n.isLoggedin;return o.a.createElement(e,Object.assign({login:a,signup:r,user:c,logout:l,isLoggedin:i},t.props))}))}}]),n}(o.a.Component)},w=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isLoggedin:!1,user:null,isLoading:!0},n.signup=function(e){var t=e.username,a=e.password,o=e.photo;f.signup({username:t,password:a,photo:o}).then((function(e){return n.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},n.login=function(e){var t=e.username,a=e.password;f.login({username:t,password:a}).then((function(e){return n.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},n.logout=function(){f.logout().then((function(){return n.setState({isLoggedin:!1,user:null})})).catch((function(e){return console.log(e)}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.me().then((function(t){return e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isLoggedin,a=e.user,r=this.login,c=this.logout,l=this.signup;return o.a.createElement(y,{value:{isLoading:t,isLoggedin:n,user:a,login:r,logout:c,signup:l}},this.props.children)}}]),t}(o.a.Component),O=new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://catch-me-there.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"imageUpload",value:function(e){return console.log(e),this.auth.post("/painting",e).then((function(e){return e.data}))}}]),e}()),x=n(8),C=n(4);function j(){var e=Object(x.a)(["\nbackground-color: #A7C7DD;\ncolor : black;\nwidth: 80%;\ndisplay: flex;\nmargin: 0 auto;\njustify-content: center;\ntext-align: center\n/* position: fixed; */\n/* height: 10%; */\n"]);return j=function(){return e},e}var S=C.b.input(j());function D(){var e=Object(x.a)(["\nbackground-color: #BA2727;\nwidth: 55%\ncolor:white;\nmargin: 10px 0;\n"]);return D=function(){return e},e}function _(){var e=Object(x.a)(["\nbackground-color: rgb(50,164,174, 0.90);\nwidth: 60%\ncolor: white;\nmargin: 20px 0;\ntext-decoration: none;\nfont-size: 1.1em;\n"]);return _=function(){return e},e}function A(){var e=Object(x.a)(["\nbackground-color: #63BFFF;\nwidth: 60%\ncolor:white;\nmargin: 10px 0;\n"]);return A=function(){return e},e}function I(){var e=Object(x.a)(["\nbackground-color: black;\nwidth: 40%\ncolor:white;\n"]);return I=function(){return e},e}function N(){var e=Object(x.a)(["\n","\n","\n","\n","\n"]);return N=function(){return e},e}var L=C.b.button(N(),(function(e){return e.black&&Object(C.a)(I())}),(function(e){return e.blue&&Object(C.a)(A())}),(function(e){return e.special&&Object(C.a)(_())}),(function(e){return e.red&&Object(C.a)(D())})),z=k(function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:"",photo:""},n.fileChange=function(e){var t=e.target.files[0],a=new FormData;a.append("photo",t),O.imageUpload(a).then((function(e){console.log("image",e),n.setState({photo:e})})).catch((function(e){return console.log(e)}))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state;t.username,t.password,t.photo;n.props.signup(n.state)},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(d.a)({},a,o))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.password;t.photo;return o.a.createElement("div",null,o.a.createElement("h1",{style:{marginTop:"30px"}},"Sign Up"),o.a.createElement("form",{className:"signup",onSubmit:this.handleFormSubmit},o.a.createElement("label",null,"Username:"),o.a.createElement(S,{type:"text",name:"username",value:n,onChange:this.handleChange}),o.a.createElement("label",null,"Password:"),o.a.createElement(S,{type:"password",name:"password",value:a,onChange:this.handleChange}),o.a.createElement(S,{className:"add-input",type:"file",name:"image",onChange:function(t){return e.fileChange(t)}}),o.a.createElement(L,{blue:!0},o.a.createElement("input",{type:"submit",value:"Signup"}))),o.a.createElement("p",{style:{width:"100%"}},"Already have account?"),o.a.createElement(p.b,{style:{color:"white",textDecoration:"none",width:"100%"},to:"/login"}," ",o.a.createElement(L,{black:!0},"Login ")))}}]),t}(a.Component)),P=k(function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,o=t.password;n.props.login({username:a,password:o})},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(d.a)({},a,o))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return o.a.createElement("div",null,o.a.createElement("h1",{style:{marginTop:"30px"}},"Login"),o.a.createElement("form",{className:"login",onSubmit:this.handleFormSubmit},o.a.createElement("label",null,"Username:"),o.a.createElement(S,{type:"text",name:"username",value:t,onChange:this.handleChange}),o.a.createElement("label",null,"Password:"),o.a.createElement(S,{type:"password",name:"password",value:n,onChange:this.handleChange}),o.a.createElement(L,{blue:!0},o.a.createElement("input",{type:"submit",value:"Login"}))),o.a.createElement("p",{style:{width:"100%"}},"Don't have an account?"),o.a.createElement(p.b,{style:{color:"white",textDecoration:"none",width:"100%"},to:"/signup"}," ",o.a.createElement(L,{black:!0},"Signup ")))}}]),t}(a.Component)),M=new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://catch-me-there.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"create",value:function(e){return this.auth.post("/events",e).then((function(e){var t=e.data;return console.log(t)}))}},{key:"getOne",value:function(e){return this.auth.get("/events/".concat(e)).then((function(e){return e}))}},{key:"delete",value:function(e){return console.log("in delete"),this.auth.delete("/events/delete/".concat(e)).then((function(e){return e}))}},{key:"join",value:function(e){return this.auth.put("/events/".concat(e)).then((function(e){return e}))}},{key:"leave",value:function(e){return this.auth.put("/events/leave/".concat(e)).then((function(e){return e}))}}]),e}());function T(){var e=Object(x.a)(["\n/* background-color: #A7C7DD; */\ncolor : white;\nwidth: 90%;\nmargin: 10px auto;\nborder: 1px solid white;\ntext-align: left;\nvertical-align: middle;\ntext-decoration: none;\ndisplay:flex;\njustify-content: space-between;\nalign-items: center;\npadding-left: 30px;\nimg{\n    margin:5px;\n    height: 80px;\n    width: 80px;\n    border: 1px solid gray;\n    border-radius: 10%;\n    object-fit: cover;\n    /* background-repeat: no-repeat;\n    background-position: 50% 50%; */\n}\n"]);return T=function(){return e},e}var R=C.b.div(T());function U(){var e=Object(x.a)(["\n\nbackground-image: url('https://images.pexels.com/photos/954547/pexels-photo-954547.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940');\nheight: 100%; /* You must set a specified height */\n  background-position: center; /* Center the image */\n  background-repeat: no-repeat; /* Do not repeat the image */\n  background-size: cover;\n\n\nwidth: 100%;\ntext-align: center;\ntext-decoration: none;\nposition: relative;\n/* margin-top: 100px; */\npadding-top:90px;\noverflow-y:hidden;\nh2, h1{\n    margin: 0;\n    color: white;\n}\n"]);return U=function(){return e},e}var B=C.b.div(U()),F=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).play=function(){n.state.sound.play()},n.getAllEvents=function(){v.a.get("".concat("https://catch-me-there.herokuapp.com","/events"),{withCredentials:!0}).then((function(e){n.setState({events:e.data})})).catch((function(e){}))},n.state={events:[],sound:document.getElementById("click")},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getAllEvents()}},{key:"render",value:function(){var e=this.state.events;return console.log("check",e),o.a.createElement(B,null,e.map((function(e,t){return o.a.createElement(R,{key:e._id},o.a.createElement("div",null,o.a.createElement(p.b,{to:"/eventDetail/".concat(e._id),style:{textDecoration:"none"}},o.a.createElement("h1",null,e.title)),e.relatedConcert?o.a.createElement("div",null,o.a.createElement("h2",null,e.relatedConcert.dates.start.localDate),o.a.createElement("h2",null,e.relatedConcert._embedded.venues[0].name),o.a.createElement("h2",null,e.relatedConcert.name,"'s conert")):o.a.createElement("div",null,o.a.createElement("h2",null,e.date),o.a.createElement("h2",null,e.location))),e.photo?o.a.createElement("div",null,o.a.createElement(p.b,{to:"/eventDetail/".concat(e._id)},o.a.createElement("img",{src:e.photo}))):e.relatedConcert?o.a.createElement("div",null,o.a.createElement(p.b,{to:"/eventDetail/".concat(e._id)},o.a.createElement("img",{src:e.relatedConcert.images[1].url}))):null)})))}}]),t}(a.Component),H=n(21);function G(){var e=Object(x.a)(["\n\ncolor : white;\nwidth: 90%;\nmargin: 10px auto;\nborder: 1px solid white;\ntext-align: left;\nvertical-align: middle;\ntext-decoration: none;\ndisplay:flex;\njustify-content: space-between;\nalign-items: center;\npadding-left: 30px;\nimg{\n    margin:5px;\n    height: 80px;\n    width: 80px;\n    border: 1px solid gray;\n    border-radius: 10%;\n    object-fit: cover;\n    background-repeat: no-repeat;\n    background-position: 50% 50%;\n}\n"]);return G=function(){return e},e}var W=C.b.div(G()),Y=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).findLocation=function(){navigator.geolocation.getCurrentPosition((function(t){var n=t.coords;console.log("Your current position is:"),console.log("Latitude : ".concat(n.latitude)),console.log("Longitude: ".concat(n.longitude)),console.log("More or less ".concat(n.accuracy," meters.")),v.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(n.latitude,",").concat(n.longitude,"&key=").concat("AIzaSyDON5ziO3aZ3P0TfhHh026jQCsxBD1gNWs")).then((function(t){var n=t.data.results[0].address_components[2].long_name;n&&(console.log("from google, my city is: ",n),e.setState({currentCity:n},(function(){return console.log("state",e.state)})))})).catch((function(e){console.log(e)}))}),(function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},e.byMyLocation=function(){e.getAllConcerts(e.state.currentCity),e.setState({city:e.state.currentCity})},e.getAllConcerts=function(t,n){v.a.get("https://app.ticketmaster.com/discovery/v2/events.json?countryCode=&city=".concat(t,"&date,desc&size=150&apikey=Y4MH0iVp8WoFqZ4aSc3RFUk6DjJl4K1y")).then((function(t){e.filterConcerts(t.data._embedded.events)})).catch((function(e){console.log(e)}))},e.filterConcerts=function(t){var n=Object(H.a)(t);n.forEach((function(e,t){for(var n=0;n<e.name.length;n++)if("-"===e.name[n]||"|"===e.name[n]||":"===e.name[n])return void(" "===e.name[n-1]?" "===e.name[n-2]?e.name=e.name.substring(0,n-2):e.name=e.name.substring(0,n-1):e.name=e.name.substring(0,n))}));for(var a=Object(H.a)(n),o=0;o<a.length;o++)for(var r=o+1;r<a.length;r++)a[o].name===a[r].name&&(a.splice(r,1),r--);e.setState({concerts:a})},e.handleSubmit=function(t){t.preventDefault();var n=e.state,a=n.city,o=n.countryCode;e.getAllConcerts(a,o)},e.handleInput=function(t){var n=t.target,a=n.name,o=n.value;e.setState(Object(d.a)({},a,o))},e.state={concerts:[],filteredConcerts:[],city:"",countryCode:"",currentCity:null},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.findLocation()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.concerts,n=e.currentCity;this.state.filterConcerts;return o.a.createElement(B,null,o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,"City"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"city",value:this.state.city}),o.a.createElement(L,{blue:!0},"Search")),n?o.a.createElement(L,{blue:!0,onClick:this.byMyLocation},"Find by my location"):o.a.createElement("img",{src:"https://i.kym-cdn.com/photos/images/original/000/780/746/cc2.gif",width:"50"}),t.map((function(e){return o.a.createElement(W,{key:e.id},o.a.createElement("div",null,o.a.createElement(p.b,{to:"/concertDetail/".concat(e.id)}," ",o.a.createElement("h1",null,e.name)),o.a.createElement(p.b,{to:"/concertDetail/".concat(e.id)}," ",o.a.createElement("h2",null,e.dates.start.localDate)," ")),o.a.createElement("div",null,o.a.createElement(p.b,{to:"/concertDetail/".concat(e.id)}," ",o.a.createElement("img",{src:e.images[1].url,height:80})," ")))})))}}]),t}(a.Component);function K(){var e=Object(x.a)(["\nbackground-color: black;\n/* opacity: 0.8; */\nborder-bottom: 1px solid gray;\ncolor : white;\nwidth: 100%;\nposition: fixed;\nz-index:99;\n\n\nh1{\n    margin: 5px 0 0 0;\n}\nul{\n    list-style: none;\n    width: 100%;\n    padding: 0;\n    display: flex;\n    flex-direction:column;\n    margin-bottom: 0;\n}\nul li{\n    width: 100%;\n}\narticle{\n    display: flex;\n    justify-content: space-between;\n    padding: 20px;\n}\np{\n    margin:0\n}\n/* position: fixed; */\n/* height: 10%; */\n"]);return K=function(){return e},e}var Z=C.b.div(K());function Q(){var e=Object(x.a)(["\ncolor : white;\ntext-decoration:none;\nwidth: 100%;\nmargin: 2px auto;\ntext-align: center;\nlist-style-type: none;\nfont-size: 15px;\n/* border-bottom: 0.2px solid gray; */\nli{\n    color:white;\n}\n"]);return Q=function(){return e},e}var V=C.b.li(Q()),q=k(function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={user:{},showMenu:!1},n.showMenu=function(){var e=n.state.showMenu;n.setState({showMenu:!e})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.me().then((function(t){e.setState({user:t})})).catch((function(e){}))}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.logout,a=e.isLoggedin;return console.log("in navbar",this.props),o.a.createElement(Z,null,a?o.a.createElement("div",null,o.a.createElement("article",null,o.a.createElement(p.c,{to:"/profile/".concat(this.props.user._id),className:"profile-top"},o.a.createElement("img",{className:"profile-photo",src:t.photo,width:"20"}),o.a.createElement("p",{className:"name"},t.username)),o.a.createElement("h1",{onClick:this.showMenu,className:"title"},"Catch Me There"),o.a.createElement("img",{onClick:this.showMenu,src:"https://icon-library.net/images/white-hamburger-menu-icon/white-hamburger-menu-icon-24.jpg",width:"30"})),this.state.showMenu?o.a.createElement("ul",{className:"folded"},o.a.createElement(V,{style:{borderBottom:"0.1px solid rgb(133,133,133,72)"}},o.a.createElement(p.c,{onClick:this.showMenu,className:"nav-link",to:"/concerts"},"Concerts")),o.a.createElement(V,{style:{borderBottom:"0.1px solid rgb(133,133,133,72)"}},o.a.createElement(p.c,{onClick:this.showMenu,className:"nav-link",to:"/events"},"Events")),o.a.createElement(V,{style:{borderBottom:"0.1px solid rgb(133,133,133,72)"}},o.a.createElement(p.c,{onClick:this.showMenu,className:"nav-link",to:"/addEvents"},"Create Event")),o.a.createElement(V,{style:{borderBottom:"0.1px solid rgb(133,133,133,72)"}},o.a.createElement(p.c,{onClick:this.showMenu,to:"/profile/".concat(this.props.user._id),className:"profile-link"},"Profile")),o.a.createElement(V,{style:{borderBottom:"0.1px solid rgb(133,133,133,72)"}},o.a.createElement(p.c,{onClick:this.showMenu,className:"nav-link",to:"/drums"},"Drums")),o.a.createElement(V,null,o.a.createElement("button",{className:"logout",onClick:n},"Logout"))):null):null)}}]),t}(a.Component)),J=(n(47),new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://catch-me-there.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"getTop",value:function(e){return this.auth.get("/spotify/".concat(e)).then((function(e){return e}))}}]),e}())),X=n(34);function $(){var e=Object(x.a)(["\narticle{\n    display: flex;\n    justify-content: space-around;\n    width: 100%;\n}\ntext-align: center;\ntext-decoration: none;\nposition: relative;\n/* margin-top: 100px; */\npadding-top:90px;\noverflow-y:hidden;\nh2, h1{\n    margin: 0;\n    color: white;\n}\n\n"]);return $=function(){return e},e}var ee=C.b.div($()),te=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={concert:null,spotifyLink:"",tracks:[],relatedEvents:[]},n.goodNameFunc=function(e){for(var t=0;t<e.length;t++)if("-"===e[t]||"|"===e[t]||":"===e[t])return e=" "===e[t-1]?" "===e[t-2]?e.substring(0,t-2):e.substring(0,t-1):e.substring(0,t);return e},n.getTopSongs=function(e){console.log("artist to send,",e),J.getTop(e).then((function(e){console.log("result",e),n.setState({spotifyLink:e.data.body.tracks[0].artists[0].external_urls.spotify,tracks:e.data.body.tracks}),console.log("tracks",n.state.tracks),console.log(n.state.spotifyLink)})).catch((function(e){console.log("error",e)}))},n.getAllEventsAndFindRelated=function(){v.a.get("".concat("https://catch-me-there.herokuapp.com","/events"),{withCredentials:!0}).then((function(e){var t=n.props.match.params.concertId,a=Object(H.a)(e.data),o=[];a.forEach((function(e){e.concertId&&e.concertId===t&&o.push(e)})),console.log("related events",o),n.setState({relatedEvents:o}),console.log("this state of concert",n.state.relatedEvents)})).catch((function(e){}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getOneConcert",value:function(){var e=this;console.log("props",this.props.match.params.concertId),v.a.get("https://app.ticketmaster.com/discovery/v2/events.json?id=".concat(this.props.match.params.concertId,"&apikey=Y4MH0iVp8WoFqZ4aSc3RFUk6DjJl4K1y")).then((function(t){var n=t.data._embedded.events[0];n.name=e.goodNameFunc(n.name),e.setState({concert:t.data._embedded.events[0]}),e.getTopSongs(n.name),e.getAllEventsAndFindRelated(),console.log("state",e.state.spotifyLink)})).catch((function(e){}))}},{key:"componentDidMount",value:function(){this.getOneConcert()}},{key:"render",value:function(){var e=this,t=this.state,n=t.concert,a=t.tracks,r=t.relatedEvents;return o.a.createElement(ee,null,null!=n?o.a.createElement("div",null,o.a.createElement("div",{className:"text-wrapper"},o.a.createElement("h1",{className:"artistName"},n.name),o.a.createElement("div",{className:"two-columns"},o.a.createElement("div",null,o.a.createElement("h2",null,n.dates.start.localDate),o.a.createElement("h2",null,n.dates.start.localTime),o.a.createElement("h2",null,n._embedded.venues[0].address.line1)),o.a.createElement("div",null,o.a.createElement("h2",null,n._embedded.venues[0].name),o.a.createElement("h2",null,n._embedded.venues[0].city.name),o.a.createElement("h2",null,n._embedded.venues[0].country.name)))),o.a.createElement("img",{style:{width:"100%",margin:"15px"},src:n.images[0].url}),o.a.createElement("article",null,o.a.createElement("a",{href:this.state.spotifyLink},o.a.createElement("img",{src:"https://i1.wp.com/davan.ac/wp-content/uploads/2006/07/listen-on-spotify-logo.png?ssl=1",width:"80"})," "),o.a.createElement("a",{href:n.url},o.a.createElement("img",{src:"https://www.trzcacak.rs/myfile/full/345-3451475_buy-at-ticketmaster-logos-ticketmaster.png",width:"80"})," ")),o.a.createElement(p.b,{to:"/addEvents/".concat(this.props.match.params.concertId)},o.a.createElement(L,{blue:!0},"Create related event")),a.map((function(e){if(e.preview_url)return o.a.createElement("figure",{key:e.id},o.a.createElement("figcaption",{className:"song-title"},e.name),o.a.createElement("audio",{className:"player",controls:!0,src:e.preview_url},"Your browser does not support the",o.a.createElement("code",null,"audio")," element."))})),o.a.createElement(X.a,{url:"https://www.google.com/maps/embed/v1/search?key=".concat("AIzaSyDON5ziO3aZ3P0TfhHh026jQCsxBD1gNWs","&q=").concat(n._embedded.venues[0].address.line1,"+").concat(n._embedded.venues[0].city.name),width:"300px",height:"300px",id:"myId",className:"myClassname",display:"initial",position:"relative"}),r.length>0?o.a.createElement("div",null,o.a.createElement("h2",null,"Related events"),r.map((function(e){return o.a.createElement("div",{key:e._id,style:{border:"1px solid white",margin:"5px 0"}},o.a.createElement(p.b,{to:"/eventDetail/".concat(e._id)},o.a.createElement("h1",null,e.title)))}))):null):o.a.createElement("h1",null,"loading"),o.a.createElement(L,{black:!0,onClick:function(){return e.props.history.goBack()}},"back"))}}]),t}(a.Component);n(284);function ne(){var e=Object(x.a)(["\n\nbackground-image: url('https://images.pexels.com/photos/954547/pexels-photo-954547.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940');\nheight: 100%; /* You must set a specified height */\n  background-position: center; /* Center the image */\n  background-repeat: no-repeat; /* Do not repeat the image */\n  background-size: cover;\n\n  overflow-x:hidden;\n\ncolor : white;\nwidth: 100%;\nmargin: 10px 0 auto;\ntext-align: center;\n\nposition: relative;\n/* margin-top: 100px; */\npadding-top:90px;\noverflow-y:hidden;\nh2, h1{\n    margin: 0;\n    color: white;\n}\n"]);return ne=function(){return e},e}var ae=C.b.div(ne()),oe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={whatsAppGroup:"Mendatory link",title:"Roof-top party!",description:"friends meeting for beers and music",vibe:"chill",maxPeople:30,coming:1,location:"Carrer dels Almog\xe0vers, 122",date:"20.4.20",hour:"21:00",ageRange:"18-100",photo:"",themeSong:"",concertId:"",relatedConcert:{},city:"Barcelona",country:"Spain",organizerId:""},n.goodNameFunc=function(e){for(var t=0;t<e.length;t++)if("-"===e[t]||"|"===e[t]||":"===e[t])return e=" "===e[t-1]?" "===e[t-2]?e.substring(0,t-2):e.substring(0,t-1):e.substring(0,t);return e},n.fileChange=function(e){var t=e.target.files[0],a=new FormData;a.append("photo",t),O.imageUpload(a).then((function(e){n.setState({photo:e})})).catch((function(e){return console.log(e)}))},n.handleSubmit=function(e){e.preventDefault(),f.me().then((function(e){n.setState({organizerId:e._id}),console.log("added-event",n.state),n.createEvent()})).catch((function(e){}))},n.handleInput=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(d.a)({},a,o))},n.createEvent=function(){console.log("statetocreate",n.state),M.create(n.state).then((function(e){console.log("after creating",e),n.props.history.push("/events")})).catch((function(e){}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getOneConcert",value:function(e){var t=this;console.log("props",this.props.match.params.concertId),v.a.get("https://app.ticketmaster.com/discovery/v2/events.json?id=".concat(e,"&apikey=Y4MH0iVp8WoFqZ4aSc3RFUk6DjJl4K1y")).then((function(e){e.data._embedded.events[0].name=t.goodNameFunc(e.data._embedded.events[0].name),t.setState({relatedConcert:e.data._embedded.events[0]}),t.setState({date:t.state.relatedConcert.dates.start.localDate,hour:t.state.relatedConcert.dates.start.localTime,location:t.state.relatedConcert._embedded.venues[0].address.line1,city:t.state.relatedConcert._embedded.venues[0].city.name,country:t.state.relatedConcert._embedded.venues[0].ccountry.name})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.concertId;e&&(this.setState({concertId:e}),this.getOneConcert(e))}},{key:"render",value:function(){var e=this;return o.a.createElement(ae,null,this.state.concertId?o.a.createElement("div",null,o.a.createElement("h2",null,"Create your group for the concert:"),o.a.createElement("h1",null,this.state.relatedConcert.name),o.a.createElement("hr",null)):o.a.createElement("div",null,o.a.createElement("h1",null,"Create your awesome event"),o.a.createElement("hr",null)),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,"Title"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"title",value:this.state.title}),o.a.createElement("label",null,"WhatsApp Group link"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"whatsAppGroup",value:this.state.whatsAppGroup}),o.a.createElement("label",null,"Description"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"description",value:this.state.description}),o.a.createElement("label",null,"Vibe"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"vibe",value:this.state.vibe}),o.a.createElement("label",null,"Coming"),o.a.createElement(S,{onChange:this.handleInput,type:"number",name:"coming",value:this.state.coming}),o.a.createElement("label",null,"Max People"),o.a.createElement(S,{onChange:this.handleInput,type:"number",name:"maxPeople",value:this.state.maxPeople}),o.a.createElement("label",null,"Age Range"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"ageRange",value:this.state.ageRange}),o.a.createElement("label",null,"Photo-link"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"photo",value:this.state.photo}),o.a.createElement("label",{style:{width:"100%"}},o.a.createElement("h3",null,"Or upload:")),o.a.createElement("input",{className:"add-input",type:"file",name:"image",onChange:function(t){return e.fileChange(t)}}),this.state.concertId?null:o.a.createElement("div",null,o.a.createElement("label",null,"Date"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"date",value:this.state.date}),o.a.createElement("label",null,"Location"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"location",value:this.state.location}),o.a.createElement("label",null,"Hour"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"hour",value:this.state.hour}),o.a.createElement("label",null,"City"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"city",value:this.state.city}),o.a.createElement("label",null,"Country"),o.a.createElement(S,{onChange:this.handleInput,type:"text",name:"country",value:this.state.country})),o.a.createElement(L,{blue:!0},"Submit")),o.a.createElement(L,{black:!0,onClick:function(){return e.props.history.goBack()}},"back"))}}]),t}(a.Component),re=new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://catch-me-there.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"getAll",value:function(){return this.auth.get("/user/").then((function(e){return e}))}},{key:"addOrganizing",value:function(e){}},{key:"joinEvent",value:function(e){return this.auth.put("/user/".concat(e)).then((function(e){return e}))}},{key:"leaveEvent",value:function(e){return this.auth.put("/user/leave/".concat(e)).then((function(e){return e}))}},{key:"getOneUser",value:function(e){return this.auth.get("/user/".concat(e)).then((function(e){return e}))}}]),e}()),ce=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={event:null,isGoing:!1,isMyEvent:!1,coming:null,organizer:null,googleKey:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_URL:"https://catch-me-there.herokuapp.com",REACT_APP_GOOGLEKEY:"AIzaSyDON5ziO3aZ3P0TfhHh026jQCsxBD1gNWs"}).GOOGLEKEY},n.getOneEvent=function(e){M.getOne(e).then((function(e){console.log("event-here result",n.props),n.setState({event:e.data},(function(){return console.log("event-here",n.state.event)})),n.getComingToEvent(),n.findOrganizer(),f.me().then((function(t){e.data.comingIds.includes(t._id)&&n.setState({isGoing:!0}),e.data.organizerId===t._id&&n.setState({isMyEvent:!0}),console.log("event -     state",n.state)})).catch((function(e){console.log(e)}))})).catch((function(e){}))},n.findOrganizer=function(){re.getOneUser(n.state.event.organizerId).then((function(e){n.setState({organizer:e.data}),console.log("organizer",n.state.organizer)})).catch((function(e){}))},n.leaveEvent=function(){var e=n.props.match.params.eventId;M.leave(e).then((function(t){n.setState({isGoing:!1,event:t.data}),n.getComingToEvent(),re.leaveEvent(e).then((function(e){console.log("result back from leaving",e)})).catch((function(e){console.log(e)})),console.log("leave event",t)})).catch((function(e){console.log(e)}))},n.joinEvent=function(){var e=n.props.match.params.eventId;M.join(e).then((function(t){n.setState({isGoing:!0,event:t.data}),n.getComingToEvent(),re.joinEvent(e).then((function(e){console.log("result back from joining",e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},n.getComingToEvent=function(){var e=n.state.event.comingIds,t=[];e.forEach((function(e){t.push(re.getOneUser(e))})),Promise.all(t).then((function(e){n.setState({coming:e})})).catch((function(e){}))},n.deleteEvent=function(){M.delete(n.state.event._id).then((function(e){n.setState({isMyEvent:!1}),n.props.history.push("/events")})).catch((function(e){}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getOneEvent(this.props.match.params.eventId)}},{key:"render",value:function(){var e=this,t=this.state,n=t.event,a=t.coming,r=t.organizer,c=t.isMyEvent;return console.log("google",Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_URL:"https://catch-me-there.herokuapp.com",REACT_APP_GOOGLEKEY:"AIzaSyDON5ziO3aZ3P0TfhHh026jQCsxBD1gNWs"})),o.a.createElement(B,null,null!=n?o.a.createElement("div",null,o.a.createElement("div",{className:"event-details-text"},o.a.createElement("img",{src:n.photo,width:"300"}),o.a.createElement("h1",null,n.title),o.a.createElement("h2",null,n.description),o.a.createElement("h2",null,"vibe: ",n.vibe),o.a.createElement("h2",null,n.location),o.a.createElement("h2",null,n.city),o.a.createElement("h2",null,n.date),null!=n.maxPeople?o.a.createElement("h2",null,"coming ",n.coming,"/",n.maxPeople):o.a.createElement("h2",null,"coming ",n.coming)),n.relatedConcert?o.a.createElement("div",null,o.a.createElement("h1",{style:{textShadow:"3px 3px 8px black",backgroundColor:"#56565696",padding:"3px 5px",borderRadius:"5px",width:"fit-content",margin:"0 auto"}},"related to:"),o.a.createElement("div",{className:"related-concert"},o.a.createElement("div",null,o.a.createElement(p.b,{className:"text-related",to:"/concertDetail/".concat(n.relatedConcert.id)},o.a.createElement("h2",null,n.relatedConcert.name),o.a.createElement("h2",null,n.relatedConcert._embedded.venues[0].name))),o.a.createElement("div",null,o.a.createElement(p.b,{className:"text-related",to:"/concertDetail/".concat(n.relatedConcert.id)},o.a.createElement("img",{src:n.relatedConcert.images[0].url,width:"100"})))),!this.state.isGoing&&(n.maxPeople>n.coming||null===n.maxPeople)?o.a.createElement(L,{blue:!0,onClick:this.joinEvent},"Join this event"):this.state.isGoing?o.a.createElement("div",null,o.a.createElement(L,{red:!0,onClick:this.leaveEvent},"Leave this event"),o.a.createElement(L,{special:!0}," ",o.a.createElement("a",{href:n.whatsAppGroup},o.a.createElement("h2",null,"WhatsApp Group")," ")," ")):o.a.createElement("h2",null,"Fully booked"),o.a.createElement(X.a,{url:"https://www.google.com/maps/embed/v1/search?key=".concat("AIzaSyDON5ziO3aZ3P0TfhHh026jQCsxBD1gNWs","&q=").concat(n.relatedConcert._embedded.venues[0].address.line1,"+").concat(n.relatedConcert._embedded.venues[0].city.name),width:"300px",height:"300px",id:"myId",className:"myClassname",display:"initial",position:"relative"})):o.a.createElement(X.a,{url:"https://www.google.com/maps/embed/v1/search?key=".concat("AIzaSyDON5ziO3aZ3P0TfhHh026jQCsxBD1gNWs","&q=").concat(n.location,"+").concat(n.city),width:"300px",height:"300px",id:"myId",className:"myClassname",display:"initial",position:"relative"}),r?o.a.createElement("div",{className:"coming"},o.a.createElement("h2",null,"Organizer"),o.a.createElement(p.b,{to:"/profile/".concat(r._id),style:{color:"white",textDecoration:"none",fontSize:"0.8em"}},o.a.createElement("h4",null,r.username))):null,a>0?o.a.createElement("div",{className:"coming"},o.a.createElement("h2",null,"Who is coming?"),o.a.createElement("ul",null,a.map((function(e){return o.a.createElement(V,{key:e.data._id},o.a.createElement(p.b,{to:"/profile/".concat(e.data._id),key:e.data._id,style:{color:"white",textDecoration:"none",fontSize:"0.8em"}},e.data.username," "))})))):null,c?o.a.createElement(L,{red:!0,onClick:this.deleteEvent,style:{width:"60%"}},"delete"):null,o.a.createElement(L,{black:!0,onClick:function(){return e.props.history.goBack()},style:{width:"50%",marginBottom:"10px"}},"back")):o.a.createElement("img",{src:"https://www.google.com/url?sa=i&source=images&cd=&cad=rja&uact=8&ved=2ahUKEwjRgpThsLrmAhWo4YUKHXLdDbMQjRx6BAgBEAQ&url=https%3A%2F%2Fgfycat.com%2Fdisastrousunnaturalapisdorsatalaboriosa-hockey&psig=AOvVaw1l_6ij8_XEziySAcx-gxIi&ust=1576592955573519"}))}}]),t}(a.Component),le=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={user:null,myProfile:!1,eventsAttending:null,eventsOrganizing:null},n.getUser=function(){var e=n.props.match.params.userId;re.getOneUser(e).then((function(t){n.setState({user:t.data}),n.eventsAttending(),n.eventsOrganizing(),f.me().then((function(t){console.log("result from if me",t),e===t._id&&n.setState({myProfile:!0})}))})).catch((function(e){console.log(e)}))},n.eventsOrganizing=function(){var e=n.state.user.organizing;if(e.length>0){var t=Object(H.a)(e);console.log("event id",t);var a=[];e.forEach((function(e){a.push(M.getOne(e))})),Promise.all(a).then((function(e){n.setState({eventsOrganizing:e})})).catch((function(e){}))}},n.eventsAttending=function(){console.log("this state event",n.state.event);var e=n.state.user.attending;if(e.length>0){var t=Object(H.a)(e);console.log("event id",t);var a=[];e.forEach((function(e){a.push(M.getOne(e))})),Promise.all(a).then((function(e){n.setState({eventsAttending:e})})).catch((function(e){}))}},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"componentDidUpdate",value:function(e){console.log("yooooooooo"),e.match.params.userId!==this.props.match.params.userId&&this.getUser()}},{key:"render",value:function(){var e=this,t=this.state,n=t.user,a=(t.myProfile,t.eventsAttending),r=t.eventsOrganizing;return console.log(this.state),o.a.createElement(B,null,null!=n?o.a.createElement("div",null,o.a.createElement("h1",{style:Object(d.a)({margin:"10px 0",fontSize:"1.2em",textShadow:"3px 3px 8px black",padding:"3px 5px",borderRadius:"5px",width:"fit-content"},"margin","0 auto")},n.username),o.a.createElement("img",{className:"profile-photo",src:n.photo,width:"50"})):null,null!=a?o.a.createElement("div",{className:"event-attending"},o.a.createElement("h2",{style:{marginTop:"10px",fontSize:"0.9em",borderTop:"1px dashed gray"}},"Attending"),o.a.createElement("ul",{style:{width:"100%",padding:"0"}},a.map((function(e){return o.a.createElement(V,{key:e.data._id,style:{width:"100%",margin:0,border:"none"}},o.a.createElement(p.b,{to:"/eventDetail/".concat(e.data._id),style:{color:"white",textDecoration:"none",fontSize:"0.8em",border:"none"}}," ",e.data.title," "))})))):null,null!==r?o.a.createElement("div",{className:"event-organizing"},o.a.createElement("h2",{style:{marginTop:"10px",fontSize:"0.9em",borderTop:"1px dashed gray",border:"none"}},"Organizing"),o.a.createElement("ul",{style:{width:"100%",padding:"0",fontSize:"0.7em"}},r.map((function(e){return o.a.createElement(V,{key:e.data._id},o.a.createElement(p.b,{to:"/eventDetail/".concat(e.data._id),style:{color:"white",textDecoration:"none",border:"none",fontSize:"0.8em"}}," ",e.data.title," "))})))):null,o.a.createElement(L,{black:!0,onClick:function(){return e.props.history.goBack()}},"back"))}}]),t}(a.Component);function ie(){var e=Object(x.a)(["\nbackground-image: url('https://images.assetsdelivery.com/compings_v2/eriksvoboda/eriksvoboda1708/eriksvoboda170800195.jpg');\nheight: 300px; /* You must set a specified height */\n  background-position: center; /* Center the image */\n  background-repeat: no-repeat; /* Do not repeat the image */\n  background-size: cover;\ndisplay: flex;\nmargin-top: 80px;\n"]);return ie=function(){return e},e}var se=C.b.div(ie()),ue=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={kick:document.getElementById("kick"),snare:document.getElementById("snare"),hiHat:document.getElementById("hiHat"),openHat:document.getElementById("openHat"),classDrum:"drum"},n.kick=function(){n.state.kick.currentTime=0,n.state.kick.play()},n.snare=function(){n.state.snare.currentTime=0,n.state.snare.play()},n.hiHat=function(){n.state.hiHat.currentTime=0,n.state.openHat.pause(),n.state.hiHat.play()},n.openHat=function(){n.state.openHat.currentTime=0,n.state.openHat.play()},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(B,null,o.a.createElement(se,null,o.a.createElement("div",{className:"two-drums"},o.a.createElement("div",{className:this.state.classDrum,onClick:this.snare}," Snare"),o.a.createElement("div",{className:"drum",onClick:this.kick}," kick")),o.a.createElement("div",{className:"two-drums"},o.a.createElement("div",{className:"drum",onClick:this.openHat}," Open hat"),o.a.createElement("div",{className:"drum",onClick:this.hiHat}," Hi-hat"))))}}]),t}(a.Component),me=n(45);var he=k((function(e){var t=e.component,n=e.isLoggedin,a=Object(me.a)(e,["component","isLoggedin"]);return o.a.createElement(h.b,Object.assign({},a,{render:function(e){return n?o.a.createElement(h.a,{to:"/events"}):o.a.createElement(t,e)}}))}));var de=k((function(e){var t=e.component,n=e.isLoggedin,a=Object(me.a)(e,["component","isLoggedin"]);return o.a.createElement(h.b,Object.assign({},a,{render:function(e){return n?o.a.createElement(t,e):o.a.createElement(h.a,{to:"/login"})}}))})),pe=n(121);n.n(pe).a.config();var ge=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("process.env.NODE_ENV","production"),console.log("REACT_APP_API_URL","https://catch-me-there.herokuapp.com"),o.a.createElement("div",{className:"App"},o.a.createElement(q,null),o.a.createElement(h.d,null,o.a.createElement(he,{exact:!0,path:"/",component:P}),o.a.createElement(he,{exact:!0,path:"/signup",component:z}),o.a.createElement(he,{exact:!0,path:"/login",component:P}),o.a.createElement(de,{exact:!0,path:"/drums",component:ue}),o.a.createElement(de,{exact:!0,path:"/profile/:userId",component:le}),o.a.createElement(de,{exact:!0,path:"/profile/",component:le}),o.a.createElement(de,{exact:!0,path:"/events",component:F}),o.a.createElement(de,{exact:!0,path:"/eventDetail/:eventId",component:ce}),o.a.createElement(de,{exact:!0,path:"/concerts",component:Y}),o.a.createElement(de,{exact:!0,path:"/addEvents",component:oe}),o.a.createElement(de,{exact:!0,path:"/addEvents/:concertId",component:oe}),o.a.createElement(de,{exact:!0,path:"/concertDetail/:concertId",component:te})))}}]),t}(a.Component);n(289);c.a.render(o.a.createElement(p.a,null,o.a.createElement(w,null,o.a.createElement(ge,null))),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.5d9051b5.chunk.js.map