(this["webpackJsonpreact-auth-client-done-v2"]=this["webpackJsonpreact-auth-client-done-v2"]||[]).push([[0],{123:function(e,t,n){e.exports=n(289)},289:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(116),r=n.n(c),l=n(1),i=n(2),u=n(5),s=n(4),h=n(6),m=n(22),d=n(20),p=n(3),g=n(7),v=n.n(g),f=new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://catch-me-there.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"signup",value:function(e){var t=e.username,n=e.password,a=e.photo;return console.log("user from auth-service",e),this.auth.post("/auth/signup",{username:t,password:n,photo:a}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.username,n=e.password;return this.auth.post("/auth/login",{username:t,password:n}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),E=o.a.createContext(),b=E.Consumer,y=E.Provider,O=function(e){return function(t){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(h.a)(n,t),Object(i.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement(b,null,(function(n){var a=n.login,c=n.signup,r=n.user,l=n.logout,i=n.isLoggedin;return o.a.createElement(e,Object.assign({login:a,signup:c,user:r,logout:l,isLoggedin:i},t.props))}))}}]),n}(o.a.Component)},C=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={isLoggedin:!1,user:null,isLoading:!0},n.signup=function(e){var t=e.username,a=e.password,o=e.photo;f.signup({username:t,password:a,photo:o}).then((function(e){return n.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},n.login=function(e){var t=e.username,a=e.password;f.login({username:t,password:a}).then((function(e){return n.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},n.logout=function(){f.logout().then((function(){return n.setState({isLoggedin:!1,user:null})})).catch((function(e){return console.log(e)}))},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.me().then((function(t){return e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isLoggedin,a=e.user,c=this.login,r=this.logout,l=this.signup;return o.a.createElement(y,{value:{isLoading:t,isLoggedin:n,user:a,login:c,logout:r,signup:l}},this.props.children)}}]),t}(o.a.Component),j=new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://catch-me-there.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"imageUpload",value:function(e){return console.log(e),this.auth.post("/painting",e).then((function(e){return e.data}))}}]),e}()),k=O(function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:"",photo:""},n.fileChange=function(e){var t=e.target.files[0],a=new FormData;a.append("photo",t),j.imageUpload(a).then((function(e){console.log("image",e),n.setState({photo:e})})).catch((function(e){return console.log(e)}))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state;t.username,t.password,t.photo;n.props.signup(n.state)},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(d.a)({},a,o))},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.password;t.photo;return o.a.createElement("div",null,o.a.createElement("h1",null,"Sign Up"),o.a.createElement("form",{onSubmit:this.handleFormSubmit},o.a.createElement("label",null,"Username:"),o.a.createElement("input",{type:"text",name:"username",value:n,onChange:this.handleChange}),o.a.createElement("label",null,"Password:"),o.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),o.a.createElement("input",{className:"add-input",type:"file",name:"image",onChange:function(t){return e.fileChange(t)}}),o.a.createElement("input",{type:"submit",value:"Signup"})),o.a.createElement("p",null,"Already have account?"),o.a.createElement(p.b,{to:"/login"}," Login"))}}]),t}(a.Component)),w=O(function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,o=t.password;n.props.login({username:a,password:o})},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(d.a)({},a,o))},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return o.a.createElement("div",null,o.a.createElement("h1",null,"Login"),o.a.createElement("form",{onSubmit:this.handleFormSubmit},o.a.createElement("label",null,"Username:"),o.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),o.a.createElement("label",null,"Password:"),o.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),o.a.createElement("input",{type:"submit",value:"Login"})))}}]),t}(a.Component)),S=new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://catch-me-there.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"create",value:function(e){return this.auth.post("/events",e).then((function(e){var t=e.data;return console.log(t)}))}},{key:"getOne",value:function(e){return this.auth.get("/events/".concat(e)).then((function(e){return e}))}},{key:"delete",value:function(e){return console.log("in delete"),this.auth.delete("/events/delete/".concat(e)).then((function(e){return e}))}},{key:"join",value:function(e){return this.auth.put("/events/".concat(e)).then((function(e){return e}))}},{key:"leave",value:function(e){return this.auth.put("/events/leave/".concat(e)).then((function(e){return e}))}}]),e}()),I=n(11),x=n(8);function L(){var e=Object(I.a)(["\n\ncolor : white;\nwidth: 100%;\nmargin: 10px 0;\nborder: 1px solid blue;\ntext-align: center;\n"]);return L=function(){return e},e}var _=x.a.div(L());function A(){var e=Object(I.a)(["\nwidth: 100%;\n"]);return A=function(){return e},e}var D=x.a.div(A()),P=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).getAllEvents=function(){v.a.get("http://localhost:5000/events",{withCredentials:!0}).then((function(e){n.setState({events:e.data})})).catch((function(e){}))},n.state={events:[]},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getAllEvents()}},{key:"render",value:function(){var e=this.state.events;return o.a.createElement(D,null,e.map((function(e){return o.a.createElement(_,{key:e._id},o.a.createElement(p.b,{to:"/eventDetail/".concat(e._id)},o.a.createElement("h1",null,e.title)),o.a.createElement("h2",null,e.date),o.a.createElement(p.b,{to:"/eventDetail/".concat(e._id)},o.a.createElement("img",{src:e.photo,height:100})))})))}}]),t}(a.Component),z=n(21);function U(){var e=Object(I.a)(["\n\ncolor : black;\nwidth: 100%;\nmargin: 10px 0;\nborder: 1px solid blue;\ntext-align: center;\n"]);return U=function(){return e},e}var N=x.a.div(U());function R(){var e=Object(I.a)(["\nbackground-color: #A7C7DD;\ncolor : white;\nwidth: 100%;\n/* position: fixed; */\n/* height: 10%; */\n"]);return R=function(){return e},e}var F=x.a.input(R()),M=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(s.a)(t).call(this))).findLocation=function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;console.log("Your current position is:"),console.log("Latitude : ".concat(t.latitude)),console.log("Longitude: ".concat(t.longitude)),console.log("More or less ".concat(t.accuracy," meters.")),v.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(t.latitude,",").concat(t.longitude,"&key=AIzaSyA7lsb4BEujSqiZLXlvsW1HejdLPuHunBI&")).then((function(e){var t=e.data.results[0].address_components[2].long_name;t&&console.log("from google, my city is: ",t)})).catch((function(e){console.log(e)}))}),(function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},e.byMyLocation=function(){e.getAllConcerts(e.state.currentCity)},e.getAllConcerts=function(t,n){v.a.get("https://app.ticketmaster.com/discovery/v2/events.json?countryCode=".concat(n,"&city=").concat(t,"&date,desc&size=150&apikey=Y4MH0iVp8WoFqZ4aSc3RFUk6DjJl4K1y")).then((function(t){e.filterConcerts(t.data._embedded.events)})).catch((function(e){console.log(e)}))},e.filterConcerts=function(t){var n=Object(z.a)(t);n.forEach((function(e,t){for(var n=0;n<e.name.length;n++)if("-"===e.name[n]||"|"===e.name[n]||":"===e.name[n])return void(" "===e.name[n-1]?" "===e.name[n-2]?e.name=e.name.substring(0,n-2):e.name=e.name.substring(0,n-1):e.name=e.name.substring(0,n))}));for(var a=Object(z.a)(n),o=0;o<a.length;o++)for(var c=o+1;c<a.length;c++)a[o].name===a[c].name&&(a.splice(c,1),c--);e.setState({concerts:a})},e.handleSubmit=function(t){t.preventDefault();var n=e.state,a=n.city,o=n.countryCode;e.getAllConcerts(a,o)},e.handleInput=function(t){var n=t.target,a=n.name,o=n.value;e.setState(Object(d.a)({},a,o))},e.state={concerts:[],filteredConcerts:[],city:"",countryCode:"",currentCity:null},e}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.findLocation()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.concerts,n=e.currentCity;this.state.filterConcerts;return o.a.createElement(D,null,o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,"City"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"city",value:this.state.city}),o.a.createElement("button",null,"Search")),n?o.a.createElement("button",{onClick:this.byMyLocation},"Find by my location"):null,t.map((function(e){return o.a.createElement(N,{key:e.id},o.a.createElement("h1",null,e.name),o.a.createElement("h2",null,e.dates.start.localDate),o.a.createElement(p.b,{to:"/concertDetail/".concat(e.id)}," ",o.a.createElement("img",{src:e.images[1].url,height:80})," "))})))}}]),t}(a.Component);function T(){var e=Object(I.a)(["\nbackground-color: #A7C7DD;\ncolor : white;\nwidth: 100%;\n/* position: fixed; */\n/* height: 10%; */\n"]);return T=function(){return e},e}var G=x.a.div(T()),B=O(function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={user:{}},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.me().then((function(t){e.setState({user:t})})).catch((function(e){}))}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.logout,a=e.isLoggedin;return console.log("in navbar",this.props),o.a.createElement(G,null,a?o.a.createElement("div",null,o.a.createElement("h1",null,"Catch Me There"),o.a.createElement("button",{className:"profile-link"},o.a.createElement(p.c,{to:"/profile/".concat(this.state.user._id)},"Profile")),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(p.c,{to:"/concerts"},"Concerts")),o.a.createElement("li",null,o.a.createElement(p.c,{to:"/events"},"Events")),o.a.createElement("li",null,o.a.createElement(p.c,{to:"/addEvents"},"Create Event"))),o.a.createElement("p",null,"What's up ",t.username,"?"),o.a.createElement("button",{onClick:n},"Logout")):o.a.createElement("div",null,o.a.createElement(p.b,{to:"/login"}," ",o.a.createElement("button",null,"Login")," "),o.a.createElement("br",null),o.a.createElement(p.b,{to:"/signup"}," ",o.a.createElement("button",null,"Signup")," ")))}}]),t}(a.Component)),W=(n(47),new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://catch-me-there.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"getTop",value:function(e){return this.auth.get("/spotify/".concat(e)).then((function(e){return e}))}}]),e}())),H=n(34),q=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={concert:null,spotifyLink:"",tracks:[],relatedEvents:[]},n.goodNameFunc=function(e){for(var t=0;t<e.length;t++)if("-"===e[t]||"|"===e[t]||":"===e[t])return e=" "===e[t-1]?" "===e[t-2]?e.substring(0,t-2):e.substring(0,t-1):e.substring(0,t);return e},n.getTopSongs=function(e){console.log("artist to send,",e),W.getTop(e).then((function(e){console.log("result",e),n.setState({spotifyLink:e.data.body.tracks[0].artists[0].external_urls.spotify,tracks:e.data.body.tracks}),console.log("tracks",n.state.tracks),console.log(n.state.spotifyLink)})).catch((function(e){console.log("error",e)}))},n.getAllEventsAndFindRelated=function(){v.a.get("http://localhost:5000/events",{withCredentials:!0}).then((function(e){var t=n.props.match.params.concertId,a=Object(z.a)(e.data),o=[];a.forEach((function(e){e.concertId&&e.concertId===t&&o.push(e)})),console.log("related events",o),n.setState({relatedEvents:o}),console.log("this state of concert",n.state.relatedEvents)})).catch((function(e){}))},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getOneConcert",value:function(){var e=this;console.log("props",this.props.match.params.concertId),v.a.get("https://app.ticketmaster.com/discovery/v2/events.json?id=".concat(this.props.match.params.concertId,"&apikey=Y4MH0iVp8WoFqZ4aSc3RFUk6DjJl4K1y")).then((function(t){var n=t.data._embedded.events[0];n.name=e.goodNameFunc(n.name),e.setState({concert:t.data._embedded.events[0]}),e.getTopSongs(n.name),e.getAllEventsAndFindRelated(),console.log("state",e.state.spotifyLink)})).catch((function(e){}))}},{key:"componentDidMount",value:function(){this.getOneConcert()}},{key:"render",value:function(){var e=this,t=this.state,n=t.concert,a=t.tracks,c=t.relatedEvents;return o.a.createElement("div",null,null!=n?o.a.createElement("div",null,o.a.createElement("h1",null,n.name),o.a.createElement("h2",null,n.dates.start.localDate),o.a.createElement("h2",null,n.dates.start.localTime),o.a.createElement("h2",null,n._embedded.venues[0].address.line1),o.a.createElement("h2",null,n._embedded.venues[0].name),o.a.createElement("h2",null,n._embedded.venues[0].city.name),o.a.createElement("h2",null,n._embedded.venues[0].country.name),o.a.createElement("a",{href:this.state.spotifyLink},o.a.createElement("img",{src:"https://i1.wp.com/davan.ac/wp-content/uploads/2006/07/listen-on-spotify-logo.png?ssl=1",width:"80"})," "),o.a.createElement("a",{href:n.url},o.a.createElement("img",{src:"https://www.trzcacak.rs/myfile/full/345-3451475_buy-at-ticketmaster-logos-ticketmaster.png",width:"80"})," "),o.a.createElement(p.b,{to:"/addEvents/".concat(this.props.match.params.concertId)},o.a.createElement("button",null,"Create Group")),o.a.createElement("img",{src:n.images[0].url}),a.map((function(e){if(e.preview_url)return o.a.createElement("figure",{key:e.id},o.a.createElement("figcaption",{className:"song-title"},e.name),o.a.createElement("audio",{className:"player",controls:!0,src:e.preview_url},"Your browser does not support the",o.a.createElement("code",null,"audio")," element."))})),o.a.createElement(H.a,{url:"https://www.google.com/maps/embed/v1/search?key=AIzaSyDON5ziO3aZ3P0TfhHh026jQCsxBD1gNWs&q=".concat(n._embedded.venues[0].address.line1,"+").concat(n._embedded.venues[0].city.name),width:"450px",height:"450px",id:"myId",className:"myClassname",display:"initial",position:"relative"}),c.length>0?o.a.createElement("div",null,o.a.createElement("h2",null,"Related events"),c.map((function(e){return o.a.createElement("div",{key:e._id},o.a.createElement(p.b,{to:"/eventDetail/".concat(e._id)},o.a.createElement("h1",null,e.title)))}))):null):o.a.createElement("h1",null,"loading"),o.a.createElement("button",{onClick:function(){return e.props.history.goBack()}},"back"))}}]),t}(a.Component);n(283);function Z(){var e=Object(I.a)(["\n\ncolor : black;\nwidth: 100%;\nmargin: 10px 0;\ntext-align: center;\n"]);return Z=function(){return e},e}var J=x.a.div(Z()),V=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={whatsAppGroup:"",title:"",description:"",vibe:"",maxPeople:30,coming:0,location:"",date:"",hour:"",ageRange:"18-100",photo:"",themeSong:"",concertId:"",relatedConcert:{},city:"",country:"",organizerId:""},n.goodNameFunc=function(e){for(var t=0;t<e.length;t++)if("-"===e[t]||"|"===e[t]||":"===e[t])return e=" "===e[t-1]?" "===e[t-2]?e.substring(0,t-2):e.substring(0,t-1):e.substring(0,t);return e},n.fileChange=function(e){var t=e.target.files[0],a=new FormData;a.append("photo",t),j.imageUpload(a).then((function(e){n.setState({photo:e})})).catch((function(e){return console.log(e)}))},n.handleSubmit=function(e){e.preventDefault(),f.me().then((function(e){n.setState({organizerId:e._id}),console.log("added-event",n.state),n.createEvent()})).catch((function(e){}))},n.handleInput=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(d.a)({},a,o))},n.createEvent=function(){console.log("statetocreate",n.state),S.create(n.state).then((function(e){console.log("after creating",e),n.props.history.push("/events")})).catch((function(e){}))},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"getOneConcert",value:function(e){var t=this;console.log("props",this.props.match.params.concertId),v.a.get("https://app.ticketmaster.com/discovery/v2/events.json?id=".concat(e,"&apikey=Y4MH0iVp8WoFqZ4aSc3RFUk6DjJl4K1y")).then((function(e){e.data._embedded.events[0].name=t.goodNameFunc(e.data._embedded.events[0].name),t.setState({relatedConcert:e.data._embedded.events[0]}),t.setState({date:t.state.relatedConcert.dates.start.localDate,hour:t.state.relatedConcert.dates.start.localTime,location:t.state.relatedConcert._embedded.venues[0].address.line1,city:t.state.relatedConcert._embedded.venues[0].city.name,country:t.state.relatedConcert._embedded.venues[0].ccountry.name})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.concertId;e&&(this.setState({concertId:e}),this.getOneConcert(e))}},{key:"render",value:function(){var e=this;return o.a.createElement(J,null,this.state.concertId?o.a.createElement("div",null,o.a.createElement("h2",null,"Create your group for the concert:"),o.a.createElement("h1",null,this.state.relatedConcert.name)):o.a.createElement("h1",null,"Create your awesome event"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,"Title"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"title",value:this.state.title}),o.a.createElement("label",null,"WhatsApp Group link"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"whatsAppGroup",value:this.state.whatsAppGroup}),o.a.createElement("label",null,"Description"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"description",value:this.state.description}),o.a.createElement("label",null,"Vibe"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"vibe",value:this.state.vibe}),o.a.createElement("label",null,"Coming"),o.a.createElement(F,{onChange:this.handleInput,type:"number",name:"coming",value:this.state.coming}),o.a.createElement("label",null,"Max People"),o.a.createElement(F,{onChange:this.handleInput,type:"number",name:"maxPeople",value:this.state.maxPeople}),o.a.createElement("label",null,"Age Range"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"ageRange",value:this.state.ageRange}),o.a.createElement("label",null,"Photo-link"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"photo",value:this.state.photo}),o.a.createElement(F,{className:"add-input",type:"file",name:"image",onChange:function(t){return e.fileChange(t)}}),this.state.concertId?null:o.a.createElement("div",null,o.a.createElement("label",null,"Date"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"date",value:this.state.date}),o.a.createElement("label",null,"Location"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"location",value:this.state.location}),o.a.createElement("label",null,"Hour"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"hour",value:this.state.hour}),o.a.createElement("label",null,"City"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"city",value:this.state.city}),o.a.createElement("label",null,"Country"),o.a.createElement(F,{onChange:this.handleInput,type:"text",name:"country",value:this.state.country})),o.a.createElement("button",null,"Submit")))}}]),t}(a.Component),Y=new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://catch-me-there.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"getAll",value:function(){return this.auth.get("/user/").then((function(e){return e}))}},{key:"addOrganizing",value:function(e){}},{key:"joinEvent",value:function(e){return this.auth.put("/user/".concat(e)).then((function(e){return e}))}},{key:"leaveEvent",value:function(e){return this.auth.put("/user/leave/".concat(e)).then((function(e){return e}))}},{key:"getOneUser",value:function(e){return this.auth.get("/user/".concat(e)).then((function(e){return e}))}}]),e}());function K(){var e=Object(I.a)(["\nbackground-color: black;\ncolor : white;\n"]);return K=function(){return e},e}var Q=x.a.button(K()),X=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={event:null,isGoing:!1,isMyEvent:!1,coming:null,organizer:null,googleKey:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_URL:"https://catch-me-there.herokuapp.com"}).GOOGLEKEY},n.getOneEvent=function(e){S.getOne(e).then((function(e){console.log("event-here result",n.props),n.setState({event:e.data},(function(){return console.log("event-here",n.state.event)})),n.getComingToEvent(),n.findOrganizer(),f.me().then((function(t){e.data.comingIds.includes(t._id)&&n.setState({isGoing:!0}),e.data.organizerId===t._id&&n.setState({isMyEvent:!0}),console.log("event -     state",n.state)})).catch((function(e){console.log(e)}))})).catch((function(e){}))},n.findOrganizer=function(){Y.getOneUser(n.state.event.organizerId).then((function(e){n.setState({organizer:e.data}),console.log("organizer",n.state.organizer)})).catch((function(e){}))},n.leaveEvent=function(){var e=n.props.match.params.eventId;S.leave(e).then((function(t){n.setState({isGoing:!1,event:t.data}),n.getComingToEvent(),Y.leaveEvent(e).then((function(e){console.log("result back from leaving",e)})).catch((function(e){console.log(e)})),console.log("leave event",t)})).catch((function(e){console.log(e)}))},n.joinEvent=function(){var e=n.props.match.params.eventId;S.join(e).then((function(t){n.setState({isGoing:!0,event:t.data}),n.getComingToEvent(),Y.joinEvent(e).then((function(e){console.log("result back from joining",e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},n.getComingToEvent=function(){var e=n.state.event.comingIds,t=[];e.forEach((function(e){t.push(Y.getOneUser(e))})),Promise.all(t).then((function(e){n.setState({coming:e})})).catch((function(e){}))},n.deleteEvent=function(){S.delete(n.state.event._id).then((function(e){n.setState({isMyEvent:!1}),n.props.history.push("/events")})).catch((function(e){}))},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getOneEvent(this.props.match.params.eventId)}},{key:"render",value:function(){var e=this,t=this.state,n=t.event,a=t.coming,c=t.organizer,r=t.isMyEvent;return console.log("google",Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_URL:"https://catch-me-there.herokuapp.com"})),o.a.createElement("themeProvider",null,null!=n?o.a.createElement("div",null,o.a.createElement("img",{src:n.photo,width:"300"}),o.a.createElement("h1",null,n.title),o.a.createElement("h2",null,n.description),o.a.createElement("h2",null,n.location),o.a.createElement("h2",null,n.city),o.a.createElement("h2",null,n.date),o.a.createElement("h2",null,"coming ",n.coming,"/",n.maxPeople),!this.state.isGoing&&n.maxPeople>n.coming?o.a.createElement("button",{onClick:this.joinEvent},"Join this event"):this.state.isGoing?o.a.createElement("div",null,o.a.createElement("a",{href:n.whatsAppGroup},o.a.createElement("h2",null,"WhatsApp Group")," "),o.a.createElement("button",{onClick:this.leaveEvent},"Leave this event")):o.a.createElement("h2",null,"Fully booked"),n.relatedConcert?o.a.createElement("div",null,o.a.createElement("h1",null,"related to:"),o.a.createElement(p.b,{to:"/concertDetail/".concat(n.relatedConcert.id)},o.a.createElement("h2",null,n.relatedConcert.name)),o.a.createElement(H.a,{url:"https://www.google.com/maps/embed/v1/search?key=AIzaSyDON5ziO3aZ3P0TfhHh026jQCsxBD1gNWs&q=".concat(n.relatedConcert._embedded.venues[0].address.line1,"+").concat(n.relatedConcert._embedded.venues[0].city.name),width:"450px",height:"450px",id:"myId",className:"myClassname",display:"initial",position:"relative"})):o.a.createElement(H.a,{url:"https://www.google.com/maps/embed/v1/search?key=AIzaSyDON5ziO3aZ3P0TfhHh026jQCsxBD1gNWs&q=".concat(n.location,"+").concat(n.city),width:"450px",height:"450px",id:"myId",className:"myClassname",display:"initial",position:"relative"}),c?o.a.createElement("div",null,o.a.createElement("h2",null,"Organizer"),o.a.createElement(p.b,{to:"/profile/".concat(c._id)},o.a.createElement("h4",null,c.username))):null,a?o.a.createElement("div",{className:"coming"},o.a.createElement("h2",null,"Who is coming?"),o.a.createElement("ul",null,a.map((function(e){return o.a.createElement("li",{key:e.data._id},o.a.createElement(p.b,{to:"/profile/".concat(e.data._id),key:e.data._id}," ",e.data.username," "))})))):null,r?o.a.createElement("button",{onClick:this.deleteEvent},"delete"):null,o.a.createElement(Q,{onClick:function(){return e.props.history.goBack()}},"back")):o.a.createElement("h1",null,"loading"))}}]),t}(a.Component),$=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={user:null,myProfile:!1,eventsAttending:null,eventsOrganizing:null},n.getUser=function(){var e=n.props.match.params.userId;Y.getOneUser(e).then((function(t){n.setState({user:t.data}),n.eventsAttending(),n.eventsOrganizing(),f.me().then((function(t){console.log("result from if me",t),e===t._id&&n.setState({myProfile:!0})}))})).catch((function(e){console.log(e)}))},n.eventsOrganizing=function(){var e=n.state.user.organizing;if(e.length>0){var t=Object(z.a)(e);console.log("event id",t);var a=[];e.forEach((function(e){a.push(S.getOne(e))})),Promise.all(a).then((function(e){n.setState({eventsOrganizing:e})})).catch((function(e){}))}},n.eventsAttending=function(){console.log("this state event",n.state.event);var e=n.state.user.attending;if(e.length>0){var t=Object(z.a)(e);console.log("event id",t);var a=[];e.forEach((function(e){a.push(S.getOne(e))})),Promise.all(a).then((function(e){n.setState({eventsAttending:e})})).catch((function(e){}))}},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"render",value:function(){var e=this,t=this.state,n=t.user,a=t.myProfile,c=t.eventsAttending,r=t.eventsOrganizing;return console.log(this.state),o.a.createElement("div",null,null!=n?o.a.createElement("div",null,o.a.createElement("h1",null,n.username),o.a.createElement("img",{src:n.photo})):null,null!=c?o.a.createElement("div",{className:"event-attending"},o.a.createElement("h2",null,"Attending"),o.a.createElement("ul",null,c.map((function(e){return o.a.createElement("li",{key:e.data._id},o.a.createElement(p.b,{to:"/eventDetail/".concat(e.data._id)}," ",e.data.title," "))})))):null,null!=r?o.a.createElement("div",{className:"event-organizing"},o.a.createElement("h2",null,"Organizing"),o.a.createElement("ul",null,r.map((function(e){return o.a.createElement("li",{key:e.data._id},o.a.createElement(p.b,{to:"/eventDetail/".concat(e.data._id)}," ",e.data.title," "))})))):null,a?o.a.createElement("button",null,"Edit profile"):null,o.a.createElement("button",{onClick:function(){return e.props.history.goBack()}},"back"))}}]),t}(a.Component),ee=n(45);var te=O((function(e){var t=e.component,n=e.isLoggedin,a=Object(ee.a)(e,["component","isLoggedin"]);return o.a.createElement(m.b,Object.assign({},a,{render:function(e){return n?o.a.createElement(m.a,{to:"/events"}):o.a.createElement(t,e)}}))}));var ne=O((function(e){var t=e.component,n=e.isLoggedin,a=Object(ee.a)(e,["component","isLoggedin"]);return o.a.createElement(m.b,Object.assign({},a,{render:function(e){return n?o.a.createElement(t,e):o.a.createElement(m.a,{to:"/login"})}}))}));n(286).config();var ae=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(B,null),o.a.createElement(m.d,null,o.a.createElement(te,{exact:!0,path:"/signup",component:k}),o.a.createElement(te,{exact:!0,path:"/login",component:w}),o.a.createElement(ne,{exact:!0,path:"/profile/:userId",component:$}),o.a.createElement(ne,{exact:!0,path:"/profile/",component:$}),o.a.createElement(ne,{exact:!0,path:"/events",component:P}),o.a.createElement(ne,{exact:!0,path:"/eventDetail/:eventId",component:X}),o.a.createElement(ne,{exact:!0,path:"/concerts",component:M}),o.a.createElement(ne,{exact:!0,path:"/addEvents",component:V}),o.a.createElement(ne,{exact:!0,path:"/addEvents/:concertId",component:V}),o.a.createElement(ne,{exact:!0,path:"/concertDetail/:concertId",component:q})))}}]),t}(a.Component);r.a.render(o.a.createElement(p.a,null,o.a.createElement(C,null,o.a.createElement(ae,null))),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.7389fe9c.chunk.js.map